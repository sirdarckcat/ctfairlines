function checkFlag(flag) {
  const alpha = "?\n{}ABCDEFGHIJKLMNOPQRSTUVWXYZ"
  flag = flag.toUpperCase().split('').map(x=>alpha.indexOf(x));
  const publicSet = [...new Set(flag)].filter(x=>flag.filter(a=>a==x).length%2);
  let difficulty = 0;

  for(let i=0;i<5;i++){
    let bflag = flag.map(c=>(c&(1<<i))?1:0);
    let pflag = publicSet.map(c=>(c&(1<<i))?1:0);
    let needed1 = pflag.filter(x=>x).length;
    let needed0 = pflag.length - needed1;
    for(let j = 0; j < bflag.length; j++) {
      if (bflag[j]) needed1--;
      if (!bflag[j]) needed0--;
      if (needed1 <= 0 && needed0 <= 0) {
        if (needed1 % 2 == 0 && needed0 % 2 == 0) {
                console.log(i, j, 1<<j);
          difficulty += 1<<j;
          break;
        }
      }
    }
    console.log(pflag, bflag);
  }
  console.log(difficulty);
  return difficulty;
}
